<!DOCTYPE html>
<html>
<head>
    <title>Agenda de Citas Pr贸ximas</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background-color: white;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            /* Da espacio al contenido para empezar debajo del navbar */
            padding-top: 3px;
        }

        .container {
            max-width: 500px; 
            margin: 0 auto;
            padding: 20px 15px;
        }
        h1 {
            color: #00bcd4; 
            text-align: center;
            margin-bottom: 25px;
            margin-top: 0; 
        }
        
        /* Estilo base de la tarjeta */
        .cita-card {
            background-color: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); 
            margin-bottom: 15px;
            border-left: 5px solid #00bcd4; 
            display: flex;
            flex-direction: column;
            transition: opacity 0.3s ease;
        }
        
        /* ESTILO CORREGIDO: Cita Cancelada */
        .cita-cancelada {
            border-left: 5px solid #ff5252; /* Barra lateral roja */
            opacity: 0.6; 
        }
        .cita-cancelada .cita-info {
            text-decoration: none; 
            color: #777;
        }
        .cita-cancelada .cita-info strong {
            color: #777; 
        }

        /* ... (resto de tus estilos CSS) ... */

        .no-citas {
            text-align: center;
            padding: 30px;
            color: #555;
            border: 1px dashed #ccc;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    
    {# Incluir la barra de navegaci贸n (usando el c贸digo original y limpio de navbar.html) #}
    {% include 'navbar.html' %} 

    <div class="container">
        <h1>Agenda de Citas Pr贸ximas</h1>
    
        <a href="{% url 'citas:agendar_cita' %}" class="agendar-btn">
             Agendar Nueva Cita
        </a>

        <ul style="list-style: none; padding-left: 0;">
            {% for cita in citas %}
                
                <li class="cita-card {% if cita.estado == 'CANCELADA' %}cita-cancelada{% endif %}">
                    
                    {% if cita.estado == 'CANCELADA' %}
                        <div style="color: #ff5252; font-weight: bold; text-align: center; margin-bottom: 5px; font-size: 1.1em;">
                             CITA CANCELADA
                        </div>
                    {% endif %}

                    <div class="cita-info">
                        <span class="cita-icon">#锔</span>
                        Cita **#{{ cita.pk }}**
                    </div>
                    
                    <div class="cita-info">
                        <span class="cita-icon"></span>
                        {{ cita.fecha_hora_inicio|date:"l, d M Y" }} a las **{{ cita.fecha_hora_inicio|time:"H:i" }} hrs**
                    </div>

                    <div class="cita-info">
                        <span class="cita-icon"></span>
                        Kinesi贸logo: {{ cita.kinesiologo }}
                    </div>

                    <div class="cita-actions">
                        <a href="{% url 'citas:detalle_cita' cita.pk %}" class="detalle-btn">
                            Ver Detalle
                        </a>
                    </div>
                </li>
            {% empty %}
                <div class="no-citas">
                    No hay citas pr贸ximas agendadas. 隆Agenda una ahora!
                </div>
            {% endfor %}
        </ul>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>